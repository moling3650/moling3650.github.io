var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,A=(e,a)=>{for(var s in a||(a={}))n.call(a,s)&&o(e,s,a[s]);if(t)for(var s of t(a))l.call(a,s)&&o(e,s,a[s]);return e},c=(e,t)=>a(e,s(t));import{aA as i,G as d,H as r,$ as u,Z as m,I as p,d as g,r as f,J as h,c as w,e as b,i as x,w as k,f as _,n as y,S as E,z as B,T as v,h as C,t as U,U as S,p as Q,a1 as I,aB as R,a2 as T,F as V,g as Y,aC as D,E as F,_ as N,ao as J,V as M,ab as O,j as G,l as Z,aD as X,B as P,u as j,aE as H,an as z,a as W,aF as K}from"./index-5QPA0VXV.js";import{g as L}from"./login.CXyxi2xp.js";const $=c(A({},p),{customHeaderClass:m(""),modelValue:A(A({},d(!1)),i(Boolean)),actions:u(),panels:u(),title:String,cancelText:String,closeOnClickAction:d(!0),closeOnClickModal:d(!0),duration:r(200),zIndex:r(10),lazyRender:d(!0),safeAreaInsetBottom:d(!0)}),q=N(g(c(A({},{name:"wd-action-sheet",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:$,emits:["select","click-modal","cancel","closed","close","open","opened","update:modelValue"],setup(e,{emit:a}){const s=e,t=a,n=f([]),l=f(!1);function o(){return s.panels.length&&!F(s.panels[0])}function A(e,a,n){if("action"===a){if(s.actions[e].disabled||s.actions[e].loading)return;t("select",{item:s.actions[e],index:e})}else o()?t("select",{item:s.panels[Number(n)],index:n}):t("select",{item:s.panels[e][Number(n)],rowIndex:e,colIndex:n});s.closeOnClickAction&&d()}function c(){t("click-modal")}function i(){t("cancel"),d()}function d(){t("update:modelValue",!1),t("close")}function r(){t("open")}function u(){t("opened")}function m(){t("closed")}return h((()=>s.panels),(function(){n.value=o()?[s.panels]:s.panels}),{deep:!0,immediate:!0}),h((()=>s.modelValue),(e=>{l.value=e}),{deep:!0,immediate:!0}),(e,a)=>{const s=x,t=R,o=Y;return b(),w(s,null,{default:k((()=>[_(D,{"custom-class":"wd-action-sheet__popup","custom-style":""+(e.actions&&e.actions.length||e.panels&&e.panels.length?"background: transparent;":""),modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),duration:e.duration,position:"bottom","close-on-click-modal":e.closeOnClickModal,"safe-area-inset-bottom":e.safeAreaInsetBottom,"lazy-render":e.lazyRender,onEnter:r,onClose:d,onAfterEnter:u,onAfterLeave:m,onClickModal:c,"z-index":e.zIndex},{default:k((()=>[_(s,{class:E(`wd-action-sheet ${e.customClass}`),style:y(`${e.actions&&e.actions.length||e.panels&&e.panels.length?"margin: 0 10px calc(var(--window-bottom) + 10px) 10px; border-radius: 16px;":"margin-bottom: var(--window-bottom);"} ${e.customStyle}`)},{default:k((()=>[e.title?(b(),w(s,{key:0,class:E(`wd-action-sheet__header ${e.customHeaderClass}`)},{default:k((()=>[C(U(e.title)+" ",1),_(S,{"custom-class":"wd-action-sheet__close",name:"add",onClick:d})])),_:1},8,["class"])):B("",!0),e.actions&&e.actions.length?(b(),w(s,{key:1,class:"wd-action-sheet__actions"},{default:k((()=>[(b(!0),Q(V,null,I(e.actions,((e,a)=>(b(),w(t,{key:a,class:E(`wd-action-sheet__action ${e.disabled?"wd-action-sheet__action--disabled":""}  ${e.loading?"wd-action-sheet__action--loading":""}`),style:y(`color: ${e.color}`),onClick:e=>A(a,"action")},{default:k((()=>[e.loading?(b(),w(T,{key:0,"custom-class":"`wd-action-sheet__action-loading"})):(b(),w(s,{key:1,class:"wd-action-sheet__name"},{default:k((()=>[C(U(e.name),1)])),_:2},1024)),!e.loading&&e.subname?(b(),w(s,{key:2,class:"wd-action-sheet__subname"},{default:k((()=>[C(U(e.subname),1)])),_:2},1024)):B("",!0)])),_:2},1032,["class","style","onClick"])))),128))])),_:1})):B("",!0),n.value&&n.value.length?(b(),w(s,{key:2},{default:k((()=>[(b(!0),Q(V,null,I(n.value,((e,a)=>(b(),w(s,{key:a,class:"wd-action-sheet__panels"},{default:k((()=>[_(s,{class:"wd-action-sheet__panels-content"},{default:k((()=>[(b(!0),Q(V,null,I(e,((e,t)=>(b(),w(s,{key:t,class:"wd-action-sheet__panel",onClick:e=>A(a,"panels",t)},{default:k((()=>[_(o,{class:"wd-action-sheet__panel-img",src:e.iconUrl},null,8,["src"]),_(s,{class:"wd-action-sheet__panel-title"},{default:k((()=>[C(U(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):B("",!0),v(e.$slots,"default",{},void 0,!0),e.cancelText?(b(),w(t,{key:3,class:"wd-action-sheet__cancel",onClick:i},{default:k((()=>[C(U(e.cancelText),1)])),_:1})):B("",!0)])),_:3},8,["class","style"])])),_:3},8,["custom-style","modelValue","duration","close-on-click-modal","safe-area-inset-bottom","lazy-render","z-index"])])),_:3})}}})),[["__scopeId","data-v-04c084fb"]]),ee=N(g({__name:"ExTabbar",props:{active:{type:String,default:"home"}},setup(e,{expose:a}){const s=e,t=J(),n=M({deviceSn:""}),l=f([{key:"home",name:"首页"},{key:"mine",name:"我的"}]);const o=O("tabbar-msg-box"),A=f(!1),c=f([{name:"老人"},{name:"儿童"},{name:"宠物"}]);function i(){K({success:e=>{o.alert(JSON.stringify(e)),"CODE_128"===e.scanType?d(e.result):o.alert("请扫描条形码")}})}function d(e){return a=this,s=null,l=function*(){n.deviceSn=e;const{code:a,data:s}=yield L({deviceSn:e});if(0===a&&s.records.length>0){const{phone:a}=s.records[0];a!==t.phone?z({url:`/pages/info/info?phone=${a}&deviceSn=${e}`}):z({url:`/pages/form/form?phone=${a}&deviceSn=${e}`})}else o.confirm({msg:"该设备尚未绑定，是否立即绑定",cancelButtonText:"取消",confirmButtonText:"立即绑定",cancelButtonProps:{size:"large"},confirmButtonProps:{size:"large"}}).then((()=>{A.value=!0})).catch((()=>{}))},new Promise(((e,t)=>{var n=e=>{try{A(l.next(e))}catch(a){t(a)}},o=e=>{try{A(l.throw(e))}catch(a){t(a)}},A=a=>a.done?e(a.value):Promise.resolve(a.value).then(n,o);A((l=l.apply(a,s)).next())}));var a,s,l}function r({item:e}){const{deviceSn:a}=n;z({url:`/pages/form/form?phone=${t.phone}&deviceSn=${a}&type=${e.name}`})}return a({bindDevice:d}),(e,a)=>{const n=Y,o=P,d=x,u=G(Z("wd-action-sheet"),q),m=G(Z("wd-message-box"),X);return b(),w(d,{class:"ex-tabbar"},{default:k((()=>[_(d,{class:"fixed inset-6 top-auto flex-between-center text-2.5 text-white"},{default:k((()=>[_(d,{class:"flex-center w-[182rpx] h-15 rounded-full bg-[#5db661]"},{default:k((()=>[_(d,{class:"flex-between-center flex-col h-8",onClick:i},{default:k((()=>[_(n,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgB1ZPRDYAgDEQPJ3AENpcNdANGwg1qa47YHwVDYuJL+gHk2gNaQBGRqJE1iobgBrlYTQMnLu6wJ4FQE8FsRtKY0YAFEzXZZ43oxApVF6FaDgpe8HTVbwmjVib8nuFvtDfYudHsQieOfpHZVUtPN7ILF2q28WGqltxQtRIUuj7FB02G8Z90RKOgAAAAAElFTkSuQmCC",class:"w-4 h-4",mode:"scaleToFill"}),_(o,{class:"leading-2.5"},{default:k((()=>[C("绑定设备")])),_:1})])),_:1})])),_:1}),_(d,{class:"flex-between-center w-[384rpx] h-15 p-1 rounded-full bg-black box-border"},{default:k((()=>[(b(!0),Q(V,null,I(j(l),(e=>(b(),w(d,{key:e.key,class:E(["flex-1 flex-between-center flex-col h-8",{active:s.active===e.key}]),onClick:a=>function(e){if(s.active!==e){if("mine"===e&&!t.phone)return void z({url:"/pages/login/login"});W({url:"mine"===e?"/pages/mine/mine":"/pages/index/index"})}}(e.key)},{default:k((()=>["home"===e.key&&"home"===s.active?(b(),w(n,{key:0,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB9SURBVHgBxZHLDYAgDEDrZwBHcBMZhQ0YwRGYyZs3R5ANdAPtoZCmEUE88JKXQOBBAh3EMehK4wUyGVCLXkybE47oJkLvTuuPKPSIhPwAJUOTiKSzD+3HMLxDQ4MiWvhBvbgX85OMMZAB/oIa3tF8v7x5SsSKT+p+lYMy3A27KT1W/b3fpwAAAABJRU5ErkJggg==",class:"w-[30rpx] h-4",mode:"scaleToFill"})):B("",!0),"home"===e.key&&"home"!==s.active?(b(),w(n,{key:1,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB8SURBVHgBxZHRDYAgDESrcQBGcBMZhQ0cgREYzRFkA92gtgETJBYJfvCSI2m4g7QFEEDEFQMWaiGzIjl84mqCM2nDd3a+l4KadGAZfkBL/dVi76DDNtzAJzQywg/6haesPqMkVFQgm6ApBNlrUnP+8/IxfJ0WfVfloQ1/Ab9uCIv7lYcFAAAAAElFTkSuQmCC",class:"w-[30rpx] h-4",mode:"scaleToFill"})):B("",!0),"mine"===e.key&&"mine"===s.active?(b(),w(n,{key:2,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACUSURBVHgBpZJhDYAgEEZPC6gNiGAEm1jBKDYwghGMoA3UBNoAj+3YGHJ3Tr7tDX7wDrgdwDsGGZELsciK9PAhTtxJipk0eWFETy/dahWWUCgjWYvh5Bv0iGe4ZnkGSe4E0RWuQUmXeMGcEguhSEvrAcxfQ9nQrRXSJM66iTup2BZK2nDErOSpHWYbWNDmV0rISJb8APmHVD7sAP3xAAAAAElFTkSuQmCC",class:"w-[30rpx] h-4",mode:"scaleToFill"})):B("",!0),"mine"===e.key&&"mine"!==s.active?(b(),w(n,{key:3,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACjSURBVHgBpZIBDcMgEEXvamCbAyRMQp3U0hwsUzAJlbA6gCloHdw+GWkIud417Ut+IIF35ACiBhEJyAOZ5c8HGcijiFF0np48is1gneox1k5XzQP5hC15IZ9FlZl5wpAc+bW5gp56o9+IXMmiFIiN+NZENorcyzShJfU+uNocMPTIBbkpe2fkW4pNq7Tjc7TkLxs490f73rglZVnoIB2d4JT8AxrsDMR+z4UFAAAAAElFTkSuQmCC",class:"w-[30rpx] h-4",mode:"scaleToFill"})):B("",!0),_(o,{class:"leading-2.5"},{default:k((()=>[C(U(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),_(u,{modelValue:j(A),"onUpdate:modelValue":a[0]||(a[0]=e=>H(A)?A.value=e:null),actions:j(c),"cancel-text":"取消",onClose:a[1]||(a[1]=e=>A.value=!1),onSelect:r},null,8,["modelValue","actions"]),_(m,{selector:"tabbar-msg-box","custom-class":"ex-message-box"})])),_:1})}}}),[["__scopeId","data-v-843079ed"]]);export{ee as E};
